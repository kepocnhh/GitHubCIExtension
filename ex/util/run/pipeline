#!/bin/bash

[ $# -eq 0 ] && . ex/util/throw 11 "Empty arguments!"

PIPELINE_ID=$(date +%s)

for ((PIPELINE_INDEX=1; PIPELINE_INDEX<=$#; PIPELINE_INDEX++)); do
 PIPELINE_COMMAND="${!PIPELINE_INDEX}"
 . ex/util/require PIPELINE_COMMAND
 echo -e "\n\t>--\tstart $PIPELINE_ID [$PIPELINE_INDEX/$#] command\t-->"
 $PIPELINE_COMMAND || . ex/util/throw $((100 + $PIPELINE_INDEX)) "Command $PIPELINE_ID [$PIPELINE_INDEX/$#] error!"
done
